<!doctype html>
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Aurai — Fall Prevention Platform</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
  <!-- Unified site font (formal, Korean+Latin): Noto Sans KR -->
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="src/css/styles.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
</head>
<body class="bg-light">
  <!-- Splash screen: centered logo while the app loads -->
  <div id="splash-screen" class="splash-screen">
    <div class="splash-inner">
      <img src="/assets/logo.png" alt="logo" class="splash-logo" />
    </div>
  </div>
  <!-- Header fragment will be loaded here -->
  <div id="layout-header"></div>

  <!-- Two-column layout: left sidebar (fragments) + right content -->
  <div class="container-fluid">
    <div class="layout-container">
      <div class="layout-left" id="layout-sidebar"></div>
      <div class="layout-right">
        <main class="container my-5">
    <!-- Hero -->
    <section id="hero" class="py-5 text-center">
      <div class="row justify-content-center">
        <div class="col-lg-8">
          <h1 class="display-5 fw-bold site-title-nowrap">Aurai — Fall Prevention Platform</h1>
          <p class="lead text-muted site-lead">AURAI is a platform designed to detect and prevent fall risks in advance.
It analyzes uploaded videos to recognize height and posture changes and detect abnormal movements.
The system predicts high-risk situations and instantly notifies users.
AURAI aims to create a safe environment for everyone through technology.
It is not just a detection system, but a prevention-oriented safety management tool.
As more data accumulates, the AI model continues to learn and provides increasingly precise predictions.</p>
          <div class="d-flex justify-content-center gap-3 mt-4">
            <a href="#data-management" class="btn btn-lg btn-outline-secondary">Go to Data Management</a>
          </div>
        </div>
      </div>
    </section>

    <!-- Pages container: feature pages (loaded from src/pages/*.html) will be injected here -->
    <div id="pages-container"></div>


  <!-- Showcase / screenshot placeholder -->
    <section id="showcase" class="py-4">
      <div class="card mb-4 shadow-sm">
        <div class="card-body text-center">
          <h5 class="card-title">Project Demo</h5>
          <p class="text-muted">(Add demo video, screenshots or description here)</p>
          <div class="ratio ratio-16x9 bg-dark rounded"></div>
        </div>
      </div>
    </section>

    <!-- Data management (CRUD) -->
    <section id="data-management" class="py-4">
      <h3 class="mb-3">Data Management (Admin tools)</h3>
      <div class="row g-4">
        <div class="col-lg-4">
          <div class="card shadow-sm">
            <div class="card-body">
              <h5 class="card-title">Quick Actions</h5>
              <p class="text-muted">Quick record add, import/export, and an SQL-like console</p>
              <div class="d-grid gap-2 mb-3">
                <button id="btn-add" class="btn btn-primary">Add record</button>
                <button id="btn-export" class="btn btn-outline-secondary">Export (JSON)</button>
                <input id="file-input" type="file" accept="application/json" class="d-none" />
                <button id="btn-import" class="btn btn-outline-secondary">Import (JSON)</button>
              </div>

              <div class="mt-3">
                <label class="form-label">SQL Console</label>
                <textarea id="sql-input" class="form-control mb-2" rows="6" placeholder="e.g.: SELECT * WHERE risk_level=high"></textarea>
                <div class="d-flex gap-2">
                  <button id="btn-run-sql" class="btn btn-success flex-grow-1">Run</button>
                  <button id="btn-clear-sql" class="btn btn-outline-danger">Clear</button>
                </div>
                <small class="text-muted mt-2 d-block">Supported commands: SELECT, INSERT, UPDATE, DELETE (simple WHERE key=value supported)</small>
              </div>

              <div class="mt-3">
                <h6>Last result</h6>
                <pre id="sql-result" class="small bg-dark text-light p-2 rounded" style="height:120px;overflow:auto">(results will appear here)</pre>
              </div>

            </div>
          </div>

          <div class="mt-3 text-center text-muted small">
            <div>Data is stored in the browser's <code>localStorage</code>.</div>
          </div>
        </div>

        <div class="col-lg-8">
          <div class="card shadow-sm">
            <div class="card-body">
              <div class="d-flex justify-content-between align-items-center mb-3 gap-2 flex-column flex-md-row">
                <div>
                  <h5 class="card-title mb-0">Residents / Cases</h5>
                  <div class="small text-muted">Admin table — editable and removable</div>
                </div>
                <div class="d-flex gap-2 align-items-center">
                  <div class="input-group">
                    <span class="input-group-text bg-white"><i class="bi bi-search"></i></span>
                    <input id="search-input" class="form-control" placeholder="Search name, location, notes..." />
                  </div>
                  <div class="small text-muted">Total <span id="record-count">0</span></div>
                </div>
              </div>

              <div class="table-responsive">
                <table id="records-table" class="table table-hover align-middle">
                  <thead class="table-light">
                    <tr>
                      <th>#</th>
                      <th>Name</th>
                      <th>Age</th>
                      <th>Location</th>
                      <th>Risk</th>
                      <th>Last fall</th>
                      <th>Notes</th>
                      <th>Actions</th>
                    </tr>
                  </thead>
                  <tbody>
                    <!-- rows injected by JS -->
                  </tbody>
                </table>
              </div>

            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Team -->
    <section id="team" class="py-4">
      <h4 class="mb-3">팀</h4>
      <div class="card p-3 shadow-sm">
        <div class="d-flex flex-column flex-md-row gap-3 align-items-center">
          <div>
            <strong>Aurai</strong>
            <div class="small text-muted">낙상방지 연구팀</div>
          </div>
          <div class="ms-auto small text-muted">(팀원 : 21 차한규 이메일 : hangyucha@naver.com)</div>
        </div>
      </div>
    </section>

    <!-- Contact fragment is loaded from /pages/contact.html -->
    
    <!-- Tags -->
    <!-- Tags removed per request -->
    <!-- Settings fragment is loaded from /pages/settings.html -->
  </main>

  <!-- Modal: Add/Edit -->
  <div class="modal fade" id="recordModal" tabindex="-1">
    <div class="modal-dialog modal-lg modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="modal-title">레코드 추가</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <form id="record-form">
            <input type="hidden" id="record-id" />
            <div class="row g-3">
              <div class="col-md-6">
                <label class="form-label">이름</label>
                <input class="form-control" id="field-name" required />
              </div>
              <div class="col-md-3">
                <label class="form-label">나이</label>
                <input type="number" min="0" class="form-control" id="field-age" required />
              </div>
              <div class="col-md-3">
                <label class="form-label">위치</label>
                <input class="form-control" id="field-location" />
              </div>
              <div class="col-md-4">
                <label class="form-label">위험도</label>
                <select id="field-risk" class="form-select">
                  <option value="low">low</option>
                  <option value="medium">medium</option>
                  <option value="high">high</option>
                </select>
              </div>
              <div class="col-md-4">
                <label class="form-label">마지막 낙상 날짜</label>
                <input type="date" class="form-control" id="field-lastfall" />
              </div>
              <div class="col-md-12">
                <label class="form-label">메모</label>
                <textarea id="field-notes" class="form-control" rows="3"></textarea>
              </div>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button id="btn-delete" class="btn btn-outline-danger me-auto d-none">삭제</button>
          <button class="btn btn-secondary" data-bs-dismiss="modal">취소</button>
          <button id="btn-save" class="btn btn-primary">저장</button>
        </div>
      </div>
    </div>
  </div>

        </main>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <!-- Chart.js for simple trend visualization -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script type="module" src="src/js/layout-loader.js"></script>
  <script type="module" src="src/js/app.js"></script>

  <!-- Footer fragment -->
  <div id="layout-footer"></div>

  <!-- Global spinner (shown during page fragment loads) -->
  <div id="global-spinner" class="d-none position-fixed top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center" style="z-index:2000;background:rgba(0,0,0,0.25)">
    <div class="spinner-border text-primary" role="status"><span class="visually-hidden">Loading...</span></div>
  </div>

  <!-- Toast container -->
  <div id="toast-container" class="position-fixed bottom-0 end-0 p-3" style="z-index:2100;">
    <div id="global-toast" class="toast align-items-center text-bg-dark border-0" role="alert" aria-live="assertive" aria-atomic="true">
      <div class="d-flex">
        <div class="toast-body" id="global-toast-body">Ready</div>
        <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
      </div>
    </div>
  </div>

  <!-- Video modal -->
  <div class="modal fade" id="videoModal" tabindex="-1">
    <div class="modal-dialog modal-xl modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="videoModalTitle">영상 재생</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body p-0">
          <video id="video-player" controls class="w-100" style="max-height:70vh;background:#000"></video>
        </div>
      </div>
    </div>
  </div>

  <!-- Feature modal -->
  <!-- Feature viewer removed per request -->
</body>
</html>
